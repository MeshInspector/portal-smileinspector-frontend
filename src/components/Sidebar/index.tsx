import { Layout, Menu } from "antd"
import { MailOutlined, FolderOutlined } from "@ant-design/icons"
import { useRouter, useLocation } from "@tanstack/react-router"
import { useState } from "react"

import "./styles.css"

const { Sider } = Layout

const Sidebar = () => {
  const router = useRouter()
  const location = useLocation()
  const [collapsed, setCollapsed] = useState(false)

  const menuItems = [
    {
      key: "/cases",
      icon: <FolderOutlined />,
      label: "Cases",
    },
    {
      key: "/invitations",
      icon: <MailOutlined />,
      label: "Invitations",
    },
  ]

  const handleMenuClick = (key: string) => {
    router.navigate({ to: key as "/invitations" | "/cases" })
  }

  const getSelectedKey = () => {
    const pathname = location.pathname
    if (pathname.startsWith("/invitations")) {
      return "/invitations"
    }
    if (pathname.startsWith("/cases")) {
      return "/cases"
    }
    return "/cases"
  }

  return (
    <Sider
      collapsible
      collapsed={collapsed}
      onCollapse={setCollapsed}
      className="sidebar"
      width={200}
      breakpoint={"md"}
    >
      <div
        style={{
          height: 64,
          alignItems: "center",
          justifyContent: "start",
          display: "flex",
          padding: "0 24px 0 28px",
          borderBottom: "1px solid",
        }}
      >
        <svg
          width="348"
          height="71"
          viewBox="0 0 348 71"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M24.964 0V3.95293C24.964 21.6397 39.5552 35.8657 57.3409 35.8657C74.9488 35.8657 89.4012 21.9039 89.6856 4.46136V0L114.65 12.6037C110.455 40.3388 86.4006 61.4855 57.3409 61.4855C28.2813 61.4855 4.19447 40.3388 0 12.6037L24.964 0Z"
            fill="#1C9C01"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M172.366 43.0789C167.337 43.0789 162.011 40.5344 158.105 35.5046L164.792 29.2322C168.993 34.3212 178.225 34.5579 178.521 30.0606C178.639 27.6937 174.793 26.3327 171.36 25.8593C164.615 24.7942 158.461 20.5336 158.461 12.5451C158.461 4.31995 165.916 0.000244141 173.609 0.000244141C178.698 0.000244141 183.609 1.42042 187.929 6.68691L181.006 12.0126C176.627 7.33782 169.112 7.51534 168.934 12.3676C169.053 14.3795 171.242 15.563 174.497 16.2731C181.953 17.6341 189.409 20.2378 188.935 30.534C188.58 38.6409 180.059 43.0789 172.366 43.0789ZM200.175 42.8202H210.767V30.7487L210.057 22.2869L210.352 22.2277L215.974 36.607H223.252L228.756 22.2277L229.111 22.2869L228.46 30.7487L228.401 42.8202H239.052V0.925039H228.46L219.584 21.3992L210.767 0.925039H200.175V42.8202ZM252.876 42.8202H263.468V30.7487V0.925039H252.876V42.8202ZM347.233 10.8663H328.771V17.3754H345.754V26.5474H328.771V32.8198H347.233V42.8202H318.06V0.925039H347.233V10.8663ZM279.227 0.925039V42.8202H308.4V32.8198H289.938V26.5474V17.3754V10.8663V0.925039H279.227ZM210.171 56.0729C210.492 56.2893 210.772 56.5337 211.013 56.8061L211.83 55.4599C211.349 55.0272 210.832 54.6666 210.279 54.3781C209.726 54.0897 209.125 53.8693 208.476 53.717C207.827 53.5648 207.126 53.4887 206.373 53.4887C205.187 53.4887 204.137 53.677 203.224 54.0536C202.31 54.4302 201.593 54.9831 201.072 55.7123C200.551 56.4415 200.291 57.335 200.291 58.3927C200.291 59.3062 200.495 60.0394 200.904 60.5923C201.313 61.1452 201.926 61.59 202.743 61.9265C203.56 62.2631 204.562 62.5676 205.748 62.84C206.87 63.0964 207.815 63.3609 208.585 63.6333C209.354 63.9058 209.931 64.2543 210.315 64.679C210.7 65.1037 210.892 65.6686 210.892 66.3738C210.892 67.3514 210.512 68.0886 209.75 68.5854C208.989 69.0823 207.928 69.3307 206.565 69.3307C205.924 69.3307 205.303 69.2706 204.702 69.1504C204.101 69.0302 203.54 68.8579 203.019 68.6335C202.499 68.4091 202.026 68.1567 201.601 67.8763C201.176 67.5958 200.812 67.2953 200.507 66.9748L199.666 68.345C200.291 68.906 200.964 69.3667 201.685 69.7273C202.406 70.0879 203.172 70.3603 203.981 70.5446C204.79 70.7289 205.636 70.8211 206.517 70.8211C207.415 70.8211 208.24 70.7289 208.993 70.5446C209.746 70.3603 210.396 70.0759 210.94 69.6912C211.485 69.3066 211.91 68.8258 212.215 68.2489C212.519 67.6719 212.671 66.9908 212.671 66.2055C212.671 65.1798 212.431 64.3665 211.95 63.7655C211.469 63.1645 210.788 62.6878 209.907 62.3352C209.025 61.9826 207.976 61.6781 206.758 61.4217C205.668 61.1653 204.77 60.9169 204.065 60.6765C203.36 60.4361 202.843 60.1236 202.515 59.7389C202.186 59.3543 202.022 58.8254 202.022 58.1523C202.022 57.1747 202.37 56.4014 203.068 55.8325C203.765 55.2636 204.858 54.9791 206.349 54.9791C206.862 54.9791 207.347 55.0272 207.803 55.1234C208.26 55.2195 208.689 55.3477 209.089 55.508C209.49 55.6682 209.851 55.8566 210.171 56.0729ZM264.249 62.0447C264.249 61.003 264.429 59.9813 264.79 58.9796C265.151 57.978 265.675 57.0645 266.365 56.2392C267.054 55.4138 267.903 54.7567 268.913 54.2679C269.922 53.7791 271.068 53.5347 272.35 53.5347C273.873 53.5347 275.175 53.8833 276.257 54.5804C277.339 55.2776 278.136 56.171 278.649 57.2608L277.327 58.0782C276.958 57.3249 276.493 56.728 275.932 56.2872C275.371 55.8465 274.774 55.53 274.141 55.3377C273.508 55.1454 272.879 55.0492 272.254 55.0492C271.229 55.0492 270.323 55.2535 269.538 55.6622C268.753 56.0709 268.091 56.6158 267.555 57.2969C267.018 57.978 266.613 58.7393 266.341 59.5806C266.068 60.422 265.932 61.2754 265.932 62.1408C265.932 63.0864 266.092 63.9919 266.413 64.8573C266.733 65.7227 267.182 66.488 267.759 67.1531C268.336 67.8181 269.013 68.347 269.79 68.7397C270.568 69.1323 271.413 69.3286 272.326 69.3286C272.967 69.3286 273.625 69.2164 274.298 68.9921C274.971 68.7677 275.6 68.4231 276.185 67.9584C276.77 67.4936 277.238 66.8926 277.591 66.1554L278.985 66.8766C278.633 67.726 278.088 68.4472 277.351 69.0402C276.613 69.6331 275.792 70.0819 274.887 70.3864C273.981 70.6909 273.096 70.8431 272.23 70.8431C271.06 70.8431 269.987 70.5907 269.009 70.0859C268.031 69.581 267.186 68.9079 266.473 68.0666C265.76 67.2252 265.211 66.2796 264.826 65.2299C264.441 64.1802 264.249 63.1184 264.249 62.0447ZM300.795 55.1177H294.713V70.6952H293.03V55.1177H286.948V53.6272H300.795V55.1177ZM222.457 70.6952V53.6272H229.525C230.262 53.6272 230.939 53.7795 231.556 54.084C232.173 54.3885 232.706 54.8011 233.155 55.322C233.604 55.8428 233.956 56.4198 234.213 57.0528C234.469 57.6859 234.597 58.3309 234.597 58.988C234.597 59.9175 234.393 60.795 233.984 61.6203C233.576 62.4457 233.003 63.1148 232.265 63.6276C231.528 64.1405 230.663 64.3969 229.669 64.3969H224.14V70.6952H222.457ZM224.14 62.9062H229.597C230.27 62.9062 230.855 62.7219 231.352 62.3533C231.848 61.9847 232.233 61.5039 232.505 60.911C232.778 60.318 232.914 59.6769 232.914 58.9878C232.914 58.2826 232.754 57.6336 232.433 57.0406C232.113 56.4476 231.692 55.9789 231.171 55.6343C230.65 55.2897 230.077 55.1175 229.452 55.1175H224.14V62.9062ZM255.698 69.2048V70.6952H244.231V53.6272H255.482V55.1177H245.914V61.2718H254.256V62.6901H245.914V69.2048H255.698ZM177.31 70.6952V56.7283L188.344 70.6952H189.906V53.6513H188.223V67.8586L177.021 53.6272H175.627V70.6952H177.31ZM162.821 70.6952V53.6272H164.504V70.6952H162.821ZM313.18 70.0759C314.157 70.5567 315.247 70.7971 316.449 70.7971C317.587 70.7971 318.645 70.5647 319.622 70.0999C320.6 69.6352 321.449 68.9981 322.171 68.1888C322.892 67.3795 323.453 66.4579 323.853 65.4242C324.254 64.3906 324.454 63.3048 324.454 62.1669C324.454 61.0931 324.262 60.0434 323.877 59.0177C323.493 57.9921 322.952 57.0625 322.255 56.2292C321.557 55.3958 320.72 54.7307 319.743 54.2339C318.765 53.7371 317.675 53.4887 316.473 53.4887C315.335 53.4887 314.278 53.7251 313.3 54.1978C312.322 54.6706 311.469 55.3117 310.74 56.121C310.011 56.9303 309.446 57.8518 309.045 58.8855C308.644 59.9192 308.444 61.005 308.444 62.1429C308.444 63.2327 308.636 64.2944 309.021 65.3281C309.406 66.3618 309.95 67.2913 310.656 68.1167C311.361 68.942 312.202 69.5951 313.18 70.0759ZM310.583 64.8236C310.279 63.9662 310.126 63.0727 310.126 62.1432C310.126 61.2617 310.275 60.3963 310.571 59.5469C310.867 58.6975 311.292 57.9323 311.845 57.2512C312.398 56.57 313.063 56.0292 313.84 55.6285C314.618 55.2278 315.487 55.0275 316.449 55.0275C317.378 55.0275 318.228 55.2198 318.997 55.6045C319.766 55.9891 320.435 56.518 321.004 57.1911C321.573 57.8642 322.01 58.6254 322.314 59.4748C322.619 60.3242 322.771 61.2137 322.771 62.1432C322.771 63.0246 322.627 63.8901 322.338 64.7394C322.05 65.5888 321.629 66.3541 321.076 67.0352C320.523 67.7163 319.858 68.2612 319.081 68.6699C318.304 69.0786 317.426 69.2829 316.449 69.2829C315.519 69.2829 314.666 69.0866 313.888 68.6939C313.111 68.3013 312.442 67.7724 311.881 67.1073C311.32 66.4422 310.888 65.681 310.583 64.8236ZM334.472 70.6952V53.6272H341.684C342.421 53.6272 343.094 53.7795 343.703 54.084C344.312 54.3885 344.845 54.8011 345.301 55.322C345.758 55.8428 346.111 56.4198 346.359 57.0528C346.608 57.6859 346.732 58.3309 346.732 58.988C346.732 59.8053 346.576 60.5746 346.263 61.2958C345.951 62.017 345.51 62.626 344.941 63.1228C344.372 63.6196 343.703 63.9481 342.934 64.1084L347.116 70.6952H345.217L341.203 64.3969H336.154V70.6952H334.472ZM336.154 62.9062H341.731C342.404 62.9062 342.989 62.7219 343.486 62.3533C343.983 61.9847 344.367 61.4999 344.64 60.8989C344.912 60.298 345.049 59.6609 345.049 58.9878C345.049 58.2987 344.892 57.6616 344.58 57.0767C344.267 56.4917 343.851 56.0189 343.33 55.6583C342.809 55.2977 342.228 55.1175 341.587 55.1175H336.154V62.9062Z"
            fill="black"
          />
        </svg>
      </div>
      <Menu
        mode="inline"
        selectedKeys={[getSelectedKey()]}
        items={menuItems}
        onClick={({ key }) => handleMenuClick(key)}
      />
    </Sider>
  )
}

export default Sidebar
